function attachSwipeListeners(){document.querySelectorAll(".aa-item").forEach(e=>{const t=e.querySelector("img.aa-img");if(!t)return;let i=null;t.addEventListener("touchstart",t=>{const s=e.querySelectorAll("a.glightbox");s.length>=2&&(i={x:t.touches[0].clientX,y:t.touches[0].clientY,ts:Date.now()},t.preventDefault())},{passive:!1,capture:!0}),t.addEventListener("touchend",a=>{if(!i)return;const s=e.querySelectorAll("a.glightbox");if(s.length<2)return void(i=null);const n=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY,l=i.x-n,o=i.y-c;if(Math.abs(l)<40||Date.now()-i.ts>500||Math.abs(o)>0.4*Math.abs(l))return void(i=null);let h=0;s.forEach((e,t)=>{e.classList.contains("d-none")||h===t||(h=t)});const r=l>0?(h+1)%s.length:0===h?s.length-1:h-1;if(r===h)return void(i=null);s.forEach((e,t)=>{e.classList.toggle("d-none",t!==r)});const m=s[r];m.href&&(t.src=m.href),window.glightboxInstance&&setTimeout(()=>{try{window.glightboxInstance.reload()}catch(e){}},100),a.preventDefault(),i=null},{passive:!0,capture:!0})})}let currentAvis=0;function showAvis(e){const t=document.querySelectorAll(".avis-slide"),i=document.querySelectorAll(".dot");e>=t.length&&(currentAvis=0),e<0&&(currentAvis=t.length-1),t.forEach(e=>e.classList.remove("active")),i.forEach(e=>e.classList.remove("active")),t[currentAvis].classList.add("active"),i[currentAvis].classList.add("active")}function nextAvis(){currentAvis++,showAvis(currentAvis)}function prevAvis(){currentAvis--,showAvis(currentAvis)}function goToSlide(e){currentAvis=e,showAvis(currentAvis)}function filterGallery(e){document.querySelectorAll(".gallery-item").forEach(t=>{const i=t.getAttribute("data-category").split(" ");i.includes(e)?t.style.display="":t.style.display="none"}),window.AOS&&setTimeout(()=>{AOS.refresh()},100),window.glightboxInstance&&setTimeout(()=>{try{window.glightboxInstance.reload()}catch(e){}},100)}function showComparisonLightbox(e,t,i){const s=document.getElementById("custom-lightbox-wrapper");s&&s.remove();const a=`\n      <div class="glightbox-container" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.98); z-index: 99999; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 20px; overflow: hidden;">\n        <button class="glightbox-close" style="position: absolute; top: 20px; right: 30px; background: none; border: none; color: white; font-size: 40px; cursor: pointer; z-index: 100000; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">&times;</button>\n        \n        <div class="comparison-lightbox" style="width: 100%; max-width: 1200px;">\n          <img src="${e}" alt="Avant" class="comparison-lightbox-img comparison-lightbox-before" style="width: 100%; height: 100%; object-fit: contain;">\n          <img src="${t}" alt="Après" class="comparison-lightbox-img comparison-lightbox-after" style="width: 100%; height: 100%; object-fit: contain;">\n          <input type="range" min="0" max="100" value="50" class="comparison-lightbox-slider" aria-label="Curseur de comparaison avant-après">\n          <div class="comparison-lightbox-labels">\n            <span class="comparison-lightbox-label-before">AVANT</span>\n            <span class="comparison-lightbox-label-after">APRÈS</span>\n          </div>\n        </div>\n      </div>\n    `,n=document.createElement("div");n.id="custom-lightbox-wrapper",n.innerHTML=a,document.body.appendChild(n),document.body.style.overflow="hidden";const c=n.querySelector(".glightbox-container"),l=n.querySelector(".glightbox-close"),o=n.querySelector(".comparison-lightbox-slider"),h=n.querySelector(".comparison-lightbox-after"),r=()=>{const e=o.value;h.style.clipPath=`inset(0 ${100-e}% 0 0)`};o.addEventListener("input",r),o.addEventListener("touchmove",r,{passive:!0}),r();let m=null;const d=()=>{n.remove(),document.body.style.overflow="",m&&document.removeEventListener("keydown",m)};m=e=>{if("Escape"===e.key)d()},l.addEventListener("click",d),c.addEventListener("click",e=>{e.target===c&&d()}),document.addEventListener("keydown",m)}function showSimpleLightbox(e,t){const i=document.getElementById("simple-lightbox-wrapper");i&&i.remove();const s=`\n      <div class="glightbox-container" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.98); z-index: 99999; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 20px; overflow: hidden;">\n        <button class="glightbox-close" style="position: absolute; top: 20px; right: 30px; background: none; border: none; color: white; font-size: 40px; cursor: pointer; z-index: 100000; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">&times;</button>\n        \n        <img src="${e}" alt="${t}" style="width: 100%; max-width: 1200px; height: auto; max-height: 80vh; object-fit: contain;">\n      </div>\n    `,a=document.createElement("div");a.id="simple-lightbox-wrapper",a.innerHTML=s,document.body.appendChild(a),document.body.style.overflow="hidden";const n=a.querySelector(".glightbox-container"),c=a.querySelector(".glightbox-close");let l=null;const o=()=>{a.remove(),document.body.style.overflow="",l&&document.removeEventListener("keydown",l)};l=e=>{if("Escape"===e.key)o()},c.addEventListener("click",o),n.addEventListener("click",e=>{e.target===n&&o()}),document.addEventListener("keydown",l)}const googleReviews=[{author:"Paul Drouart",rating:5,text:"Nous avons fait appel à Monsieur Leclercq pour une modification à notre salle de bain. Très professionnel, travail de qualité. Je recommande.",time:"il y a 1 mois",avatar:"P"},{author:"Ib Mugi",rating:5,text:"Très bon peintre. Travail soigné et professionnel. Je suis très satisfait du résultat.",time:"il y a 2 mois",avatar:"I"},{author:"Thomas",rating:5,text:"Excellent travail, ponctuel et très professionnel. Je recommande vivement pour vos travaux de peinture.",time:"il y a 3 mois",avatar:"T"},{author:"Semedo",rating:5,text:"Service impeccable et résultat à la hauteur de mes attentes. Merci beaucoup!",time:"il y a 1 mois",avatar:"S"}];function scrollReviewsCarousel(e){const t=document.getElementById("google-reviews-carousel");if(!t)return;const i=350,s=t.scrollLeft;"prev"===e?t.scrollTo({left:s-i,behavior:"smooth"}):"next"===e&&t.scrollTo({left:s+i,behavior:"smooth"})}document.readyState?"loading"!==document.readyState&&attachSwipeListeners():document.addEventListener("DOMContentLoaded",attachSwipeListeners),document.querySelectorAll(".avis-slide").length>0&&setInterval(nextAvis,6e3),filterGallery("exterieur"),document.querySelectorAll(".chip").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),document.querySelectorAll(".chip").forEach(e=>e.classList.remove("chip-active")),this.classList.add("chip-active"),filterGallery(this.getAttribute("data-filter"))})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".aa-item[data-before][data-after]").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),showComparisonLightbox(e.dataset.before,e.dataset.after,e.dataset.title||"Avant/Après")})}),document.querySelectorAll(".aa-item:not([data-before]):not([data-after])").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",t=>{const i=e.querySelector("img");i&&showSimpleLightbox(i.src,i.alt)})}),document.querySelectorAll(".aa-item[data-before][data-after]").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),showComparisonLightbox(e.dataset.before,e.dataset.after,e.dataset.title||"Avant/Après")})}),document.querySelectorAll(".chip").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".chip").forEach(e=>e.classList.remove("chip-active")),e.classList.add("chip-active");const t=e.getAttribute("data-filter");filterGallery(t)})});const e=document.querySelectorAll(".chip")[0];e&&(e.classList.add("chip-active"),filterGallery(e.getAttribute("data-filter")))});const carousel=document.getElementById("google-reviews-carousel");if(carousel)googleReviews.forEach(e=>{const t=document.createElement("a");t.className="google-review-card",t.href="https://www.google.com/maps/place/ColorFinition/@49.8987918,2.2022813,12z/data=!4m8!3m7!1s0x878d86465a697025:0x9d09050b85867140!8m2!3d49.8987104!4d2.2846814!9m1!1b1!16s%2Fg%2F11xmy42dl7?hl=fr&entry=ttu",t.target="_blank",t.rel="noopener noreferrer",t.style.cursor="pointer",t.style.textDecoration="none",t.style.color="inherit";const i="★".repeat(e.rating)+"☆".repeat(5-e.rating);t.innerHTML=`\n        <div class="google-review-header">\n          <div class="google-review-avatar">${e.avatar}</div>\n          <div class="google-review-info">\n            <h6>${e.author}</h6>\n            <div class="google-review-meta">\n              <span class="google-review-stars">${i}</span>\n              <span>${e.time}</span>\n            </div>\n          </div>\n        </div>\n        <p class="google-review-text">${e.text}</p>\n      `,carousel.appendChild(t)});
